<!DOCTYPE html>
<head>
    <link rel="shortcut icon" href="static/tigerclubsicon.ico"/>

    <meta charset = "UTF-8">
    <meta name= "viewport" content= "width-device-width, initial-scale-1.0">
    <title> Tiger Clubs</title>

    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

    <link rel="stylesheet" href="static/ratings.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>
  
    <script
    src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"
    data-auto-replace-svg="nest"
  ></script>
    <!------ Include the above in your HEAD tag ---------->
    <link rel="stylesheet" type="text/css" href="static/jquery.raty.css" />
    <link rel="stylesheet" type="text/css"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  
    <link href="static/styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="static/choices.css" />
  
    <script src="static/jquery.raty.js"></script>
</head>
<body style="background-color:rgb(255, 247, 243)">
    {% include "admin-navbar.html" %}

    <style>
        .parallax {
          /* The image used */
          background-image: url("/static/darkprinceton.png");
    
          /* Set a specific height */
          min-height: 200px;
    
          /* Create the parallax scrolling effect */
          background-attachment: fixed;
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
        }
      </style>
      <div class="parallax">
        <form action="/editclubfromedit">
      <div class="row px-4 px-lg-5 my-5 py-5">
        <!-- CLUB NAME HEADING CARD -->
        <div class="col-8">
          <div class="card">
            <div class="col">
              <img src="https://picsum.photos/100" style="float: left; padding: 10px; padding-left: 0">
              <h1 class="font-weight-bold" style="padding: 20px; padding-bottom: 0;"><input type="text" name="name" value="{{name}}"></h1>
              {%for tag in tags: %}
              <div class="tag">
                <div class="rounded-pill small" style="background-color: #fcc397; color: #db6225; padding: .25rem; margin:
                  10px; margin-top: 0">
                  {{tag}} <span class="delete_tag close" data-tagid = "{{tag.tagid}}" data-clubid = "{{club.clubid}}"> &times;</span></div>
              </div>
              <style>
                .tag {
                  display: inline-block;
                  padding-right: 0.25rem;
                  padding-left: 0.25rem;
                }
              </style>
              {% endfor %}
              <select
                        id="tags"
                        name="tags"
                        class="form-control"
                        placeholder="Select up to 5 tags"
                        multiple
                      >
                        {% for tag in all_tags: %}
                        <option value="{{tag}}">{{tag}}</option>
                        {% endfor %}
                      </select>
                      <br>
            </div>
          </div>
          <br>
          <div class="card">
            <h4 class="font-weight-bold" style="padding: 20px;">Description</h4>
            <div class="col">
              <div class="form-group">
                <textarea
                  class="form-control"
                  id="exampleFormControlTextarea1"
                  rows="3"
                  type="text" name="description" maxlength = 350
                >{{description}}</textarea>
              </div>
            </div>
            <button type = "submit" class = "btn btn-primary edit_club">Save</button>
          </div>
        </div>
    
        <!-- CLUB RATING SECTION -->
        <div class="col-4">
          <style>
            .plswork {
              background-color: #db6225 !important;
              width: var(--wid)
            }
          </style>
    
          <div class="card text-center">
            <h4 style="padding-top: 10px"><strong>Club Ratings:</strong></h4>
            <div class="card-body" style="padding: 0">
              <ul class="justify-content-center">
                <!-- DIVERSITY -->
                <div class="row" style="width: 100%;">
                  <li class="list-group-item border-0">
                    <strong>Diversity: </strong> {{club.diversity}} <br />
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated plswork" role="progressbar"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="--wid: {{club.diversity}};">
                      </div>
                    </div>
                  </li>
                </div>
                <!-- INCLUSIVITY -->
                <div class="row" style="width: 100%;">
                  <li class="list-group-item border-0">
                    <strong>Inclusivity: </strong>{{club.inclusivity}}
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated plswork" role="progressbar"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="--wid: {{club.inclusivity}}"></div>
                    </div>
                  </li>
                </div>
                <!-- TIME COMMITMENTS -->
                <div class="row" style="width: 100%;">
                  <li class="list-group-item border-0">
                    <strong>Time Commitment: </strong>{{club.time_commitment}}
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated plswork" role="progressbar"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="--wid: {{club.time_commitment}}"></div>
                    </div>
                  </li>
                </div>
                <!-- WORKLOAD -->
                <div class="row" style="width: 100%;">
                  <li class="list-group-item border-0">
                    <strong>Workload:</strong> {{club.workload}}
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated plswork" role="progressbar"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="--wid: {{club.workload}}"></div>
                    </div>
                  </li>
                </div>
                <!-- EXPERIENCE REQUIRED -->
                <div class="row" style="width: 100%;">
                  <li class="list-group-item border-0">
                    <strong>Experience Requirement: </strong>
                    {{club.experience_requirement}}
                    <div class="progress">
                      <div class="progress-bar progress-bar-striped progress-bar-animated plswork" role="progressbar"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="--wid: {{club.experience_requirement}}">
                      </div>
                    </div>
                  </li>
                </div>
              </ul>
            </div>
          </div>
    
    
    </div>
    
        </div>
      </div>
    <!-- CLUB MEMBERS -->
    <div class="row px-4 px-lg-5">
      <div class="col">
      <h4 style="padding-left: 0; padding-top: 20px;"><strong>Club Members:</strong></h4>
      <select
      id="members"
      name="members"
      class="form-control"
      placeholder="Select up to 5 students"
      multiple
      >
      {% for student in students: %}
      <option value="{{student}}">{{student}}</option>
      {% endfor %}
      </select>
      <div style="height: 700px; overflow-y: scroll;">
      <div class="row gx-lg-5">
      {%for member in members: %}
      <div class="col-lg-6 col-xxl-4 mb-5">
      <div class="card border" style="background-color: white; margin: 5px; margin-left:0">
        <div class="card-body text-center">
            <div class = "delete_student text-right" data-clubid = "{{club.clubid}}" data-netid = "{{member.netid}}">
                <i class="fas fa-trash"></i>
              </div>
          <img class="rounded-circle"
            src="https://www.mcgregorkitchens.co.nz/app/uploads/2020/04/placeholder-profile.jpg" width="50"
            height="50" />
          <!-- <a href="/profile?diffperson={{member.netid}}" class="card-link stretched-link"></a> -->
          <h4 class="fs-4 fw-bold">{{member.name}}</h4>
          {{member.netid}}
          <br />
          {{member.year}}
          <br />
        </div>
        <style>
            .fa-trash:hover {
                width: 25px;
                height: 25px;
                line-height: 25px;
                padding: 5px;
                text-align: center;
                font-size: 15px;
                color: #ffffff;
                background-color: #e8804c; }
        </style>
      </div>
    </div>
      {% endfor %}
    </div>
    </div>
    </div>
    <div class = "col">
    
    
    
    
    
      <!-- STUDENT REVIEWS SECTION -->
      <h4 style="padding-left: 0; padding-top: 20px; padding-bottom: 5px;"><strong>Student Reviews:</strong></h4>
    <div style="height: 400px; overflow-y: scroll;">
    {% for review in reviews: %}
    {% if review.text_review is not none %}
    <div class="card rounded border-0"
      style="background-color:#fcc397; margin-bottom: 25px; color:#db6225; padding: 10px;">
      {{review.text_review}}
    </div>
    {% endif %}
    {% endfor %}
    </div>
    
    </div>
    </div>
    <!-- <br>

    <h2>Editing Club: {{name}}</h2> -->

</form>
</div>

    <!-- <form action="/editclubfromedit">
        <table>
            <tr>
                <td><label>Change Name:</label></td>
                <td><input type="text" name="name" value="{{name}}"></td>
            </tr>
            <tr>
                <td><label>Change Description:</label></td>
                <td><input type="text" name="description" value="{{description}}"></td>
            </tr>
            <tr>
                <td><label>Change Members:</label></td>
                <td><input type="text" name="members" value="{{members}}"></td>
            </tr>
            <tr>
                <td><label>Change Tags:</label></td>
                <td><input type="text" name="tags" value="{{tags}}"></td>
            </tr>
            <tr>
                <button type = "submit" class = "btn btn-primary edit_club">Save</button>
            </tr>
        </table>
    </form> -->
    <script>
        $(document).ready(function () {
          var multipleCancelButton = new Choices("#members", {
            removeItemButton: true,
            maxItemCount: 5,
            searchResultLimit: 5,
            renderChoiceLimit: 5,
          });

          var multipleCancelButton = new Choices("#tags", {
            removeItemButton: true,
            maxItemCount: 5,
            searchResultLimit: 5,
            renderChoiceLimit: 5,
          });
        });

        $(".delete_tag").click(function () {
          var tagid = $(this).data("tagid");
          var clubid = $(this).data("clubid");
          url = "/delete_club_tag?tagid=" + encodeURIComponent(tagid) + "&clubid=" + encodeURIComponent(clubid);
          console.log(url)
          $.ajax({
            url: url,
            method: "GET",
            success: function () {
              location.reload();
            },
          });
        });
        $(".delete_student").click(function () {
          var clubid = $(this).data("clubid");
          var netid = $(this).data("netid");
          url = "/delete_user?clubid=" + encodeURIComponent(clubid) + "&netid=" + encodeURIComponent(netid);
          console.log(url)
          $.ajax({
            url: url,
            method: "GET",
            success: function () {
              location.reload();
            },
          });
        });
    </script>
    <script>
        var closebtns = document.getElementsByClassName("close");
        var i;
        
        for (i = 0; i < closebtns.length; i++) {
          closebtns[i].addEventListener("click", function() {
            this.parentElement.style.display = 'none';
          });
        }
        </script>
    {% include "footer.html" %}
  </body>
</html>
